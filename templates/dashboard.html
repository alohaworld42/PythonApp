{% extends "layout.html" %}

{% block title %}Dashboard - BuyRoll{% endblock %}

{% block content %}
<div class="dashboard-container">
    <!-- Dashboard Header -->
    <div class="dashboard-header">
        <div class="container">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="dashboard-title">Welcome back, User!</h1>
                    <p class="dashboard-subtitle">Here's what's happening with your account today.</p>
                </div>
                <div class="dashboard-actions">
                    <button class="btn btn-outline btn-sm" data-tooltip="Refresh data">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                    <button class="btn btn-primary btn-sm">
                        <i class="fas fa-plus mr-2"></i>Add Product
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Dashboard Stats -->
    <section class="dashboard-stats">
        <div class="container">
            <div class="stats-grid">
                <div class="stat-card scroll-fade-in">
                    <div class="stat-icon">
                        <i class="fas fa-shopping-bag"></i>
                    </div>
                    <div class="stat-content">
                        <span class="stat-number" data-count="156">0</span>
                        <span class="stat-label">Products Shared</span>
                    </div>
                </div>
                
                <div class="stat-card scroll-fade-in stagger-1">
                    <div class="stat-icon">
                        <i class="fas fa-heart"></i>
                    </div>
                    <div class="stat-content">
                        <span class="stat-number" data-count="2.4">0</span>
                        <span class="stat-label">K Favorites</span>
                    </div>
                </div>
                
                <div class="stat-card scroll-fade-in stagger-2">
                    <div class="stat-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-content">
                        <span class="stat-number" data-count="89">0</span>
                        <span class="stat-label">Followers</span>
                    </div>
                </div>
                
                <div class="stat-card scroll-fade-in stagger-3">
                    <div class="stat-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="stat-content">
                        <span class="stat-number" data-count="12.5">0</span>
                        <span class="stat-label">% Growth</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Dashboard Content -->
    <div class="dashboard-content">
        <div class="container">
            <div class="dashboard-grid">
                <!-- Recent Activity -->
                <div class="dashboard-card">
                    <div class="dashboard-card-header">
                        <h3 class="dashboard-card-title">
                            <i class="fas fa-clock mr-2"></i>Recent Activity
                        </h3>
                        <button class="btn btn-ghost btn-sm">View All</button>
                    </div>
                    <div class="dashboard-card-content">
                        <div class="activity-list">
                            <div class="activity-item">
                                <div class="activity-icon">
                                    <i class="fas fa-heart text-red-500"></i>
                                </div>
                                <div class="activity-content">
                                    <p class="activity-text">Someone liked your product "Wireless Headphones"</p>
                                    <span class="activity-time">2 minutes ago</span>
                                </div>
                            </div>
                            
                            <div class="activity-item">
                                <div class="activity-icon">
                                    <i class="fas fa-share text-blue-500"></i>
                                </div>
                                <div class="activity-content">
                                    <p class="activity-text">Your product was shared by @johndoe</p>
                                    <span class="activity-time">15 minutes ago</span>
                                </div>
                            </div>
                            
                            <div class="activity-item">
                                <div class="activity-icon">
                                    <i class="fas fa-plus text-green-500"></i>
                                </div>
                                <div class="activity-content">
                                    <p class="activity-text">You added a new product "Smart Watch"</p>
                                    <span class="activity-time">1 hour ago</span>
                                </div>
                            </div>
                            
                            <div class="activity-item">
                                <div class="activity-icon">
                                    <i class="fas fa-user-plus text-purple-500"></i>
                                </div>
                                <div class="activity-content">
                                    <p class="activity-text">@sarah_m started following you</p>
                                    <span class="activity-time">3 hours ago</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Top Products -->
                <div class="dashboard-card">
                    <div class="dashboard-card-header">
                        <h3 class="dashboard-card-title">
                            <i class="fas fa-star mr-2"></i>Top Products
                        </h3>
                        <select class="form-select form-select-sm">
                            <option>This Week</option>
                            <option>This Month</option>
                            <option>All Time</option>
                        </select>
                    </div>
                    <div class="dashboard-card-content">
                        <div class="top-products-list">
                            <div class="top-product-item">
                                <div class="top-product-rank">#1</div>
                                <img src="https://via.placeholder.com/60x60" alt="Product" class="top-product-image">
                                <div class="top-product-info">
                                    <h4 class="top-product-name">Wireless Headphones</h4>
                                    <div class="top-product-stats">
                                        <span class="stat-item">
                                            <i class="fas fa-heart text-red-500"></i> 234
                                        </span>
                                        <span class="stat-item">
                                            <i class="fas fa-share text-blue-500"></i> 89
                                        </span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="top-product-item">
                                <div class="top-product-rank">#2</div>
                                <img src="https://via.placeholder.com/60x60" alt="Product" class="top-product-image">
                                <div class="top-product-info">
                                    <h4 class="top-product-name">Smart Watch</h4>
                                    <div class="top-product-stats">
                                        <span class="stat-item">
                                            <i class="fas fa-heart text-red-500"></i> 189
                                        </span>
                                        <span class="stat-item">
                                            <i class="fas fa-share text-blue-500"></i> 67
                                        </span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="top-product-item">
                                <div class="top-product-rank">#3</div>
                                <img src="https://via.placeholder.com/60x60" alt="Product" class="top-product-image">
                                <div class="top-product-info">
                                    <h4 class="top-product-name">Laptop Stand</h4>
                                    <div class="top-product-stats">
                                        <span class="stat-item">
                                            <i class="fas fa-heart text-red-500"></i> 156
                                        </span>
                                        <span class="stat-item">
                                            <i class="fas fa-share text-blue-500"></i> 45
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="dashboard-card">
                    <div class="dashboard-card-header">
                        <h3 class="dashboard-card-title">
                            <i class="fas fa-bolt mr-2"></i>Quick Actions
                        </h3>
                    </div>
                    <div class="dashboard-card-content">
                        <div class="quick-actions-grid">
                            <button class="quick-action-btn">
                                <i class="fas fa-plus"></i>
                                <span>Add Product</span>
                            </button>
                            
                            <button class="quick-action-btn">
                                <i class="fas fa-link"></i>
                                <span>Share URL</span>
                            </button>
                            
                            <button class="quick-action-btn">
                                <i class="fas fa-users"></i>
                                <span>Find Friends</span>
                            </button>
                            
                            <button class="quick-action-btn">
                                <i class="fas fa-chart-bar"></i>
                                <span>View Analytics</span>
                            </button>
                            
                            <button class="quick-action-btn">
                                <i class="fas fa-cog"></i>
                                <span>Settings</span>
                            </button>
                            
                            <button class="quick-action-btn">
                                <i class="fas fa-question-circle"></i>
                                <span>Help</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Performance Chart -->
                <div class="dashboard-card dashboard-card-wide">
                    <div class="dashboard-card-header">
                        <h3 class="dashboard-card-title">
                            <i class="fas fa-chart-area mr-2"></i>Performance Overview
                        </h3>
                        <div class="chart-controls">
                            <button class="btn btn-ghost btn-sm active">7D</button>
                            <button class="btn btn-ghost btn-sm">30D</button>
                            <button class="btn btn-ghost btn-sm">90D</button>
                        </div>
                    </div>
                    <div class="dashboard-card-content">
                        <div class="chart-container">
                            <canvas id="performanceChart" width="400" height="200"></canvas>
                        </div>
                        <div class="chart-legend">
                            <div class="legend-item">
                                <div class="legend-color" style="background: var(--color-primary-800);"></div>
                                <span>Favorites</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: var(--color-success);"></div>
                                <span>Shares</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: var(--color-info);"></div>
                                <span>Views</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Dashboard JavaScript -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Animate counters
    animateCounters();
    
    // Initialize chart
    initializeChart();
    
    // Setup quick actions
    setupQuickActions();
});

function animateCounters() {
    const counters = document.querySelectorAll('[data-count]');
    
    counters.forEach(counter => {
        const target = parseFloat(counter.dataset.count);
        const duration = 2000;
        const step = target / (duration / 16);
        let current = 0;
        
        const timer = setInterval(() => {
            current += step;
            if (current >= target) {
                current = target;
                clearInterval(timer);
            }
            
            if (target >= 1000) {
                counter.textContent = (current / 1000).toFixed(1) + 'K';
            } else if (target % 1 !== 0) {
                counter.textContent = current.toFixed(1) + '%';
            } else {
                counter.textContent = Math.floor(current);
            }
        }, 16);
    });
}

function initializeChart() {
    const canvas = document.getElementById('performanceChart');
    if (!canvas) return;
    
    const ctx = canvas.getContext('2d');
    const width = canvas.width;
    const height = canvas.height;
    
    // Sample data
    const data = {
        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
        favorites: [12, 19, 15, 25, 22, 30, 28],
        shares: [8, 12, 10, 15, 14, 18, 16],
        views: [25, 35, 30, 45, 40, 55, 50]
    };
    
    // Simple line chart implementation
    drawChart(ctx, data, width, height);
}

function drawChart(ctx, data, width, height) {
    const padding = 40;
    const chartWidth = width - padding * 2;
    const chartHeight = height - padding * 2;
    
    // Clear canvas
    ctx.clearRect(0, 0, width, height);
    
    // Draw grid
    ctx.strokeStyle = '#e5e7eb';
    ctx.lineWidth = 1;
    
    for (let i = 0; i <= 5; i++) {
        const y = padding + (chartHeight / 5) * i;
        ctx.beginPath();
        ctx.moveTo(padding, y);
        ctx.lineTo(width - padding, y);
        ctx.stroke();
    }
    
    // Draw data lines
    const colors = ['#1f2937', '#10b981', '#3b82f6'];
    const datasets = [data.favorites, data.shares, data.views];
    
    datasets.forEach((dataset, index) => {
        ctx.strokeStyle = colors[index];
        ctx.lineWidth = 3;
        ctx.beginPath();
        
        dataset.forEach((value, i) => {
            const x = padding + (chartWidth / (dataset.length - 1)) * i;
            const y = padding + chartHeight - (value / 60) * chartHeight;
            
            if (i === 0) {
                ctx.moveTo(x, y);
            } else {
                ctx.lineTo(x, y);
            }
        });
        
        ctx.stroke();
    });
}

function setupQuickActions() {
    const quickActionBtns = document.querySelectorAll('.quick-action-btn');
    
    quickActionBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            const action = this.querySelector('span').textContent;
            
            // Add ripple effect
            const ripple = document.createElement('div');
            ripple.className = 'ripple';
            this.appendChild(ripple);
            
            setTimeout(() => {
                ripple.remove();
            }, 600);
            
            // Show notification
            if (window.BuyRollApp) {
                const app = new window.BuyRollApp();
                app.showNotification(`${action} clicked!`, 'info', 2000);
            }
        });
    });
}
</script>
{% endblock %}