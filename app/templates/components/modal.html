<!-- Reusable Modal Component -->\n<!-- Usage: {% include 'components/modal.html' with context %} -->\n<!-- Variables: id, title, size, close_button -->\n\n{% set modal_classes = ['modal'] %}\n{% if size %}{{ modal_classes.append('modal-' + size) }}{% endif %}\n\n<div id=\"{{ id or 'modal' }}\" class=\"modal-backdrop\" onclick=\"closeModal('{{ id or 'modal' }}')\"\n     aria-hidden=\"true\" role=\"dialog\" aria-labelledby=\"{{ id or 'modal' }}-title\">\n    <div class=\"{{ modal_classes | join(' ') }}\" onclick=\"event.stopPropagation()\">\n        {% if title or close_button != false %}\n            <div class=\"modal-header\">\n                {% if title %}\n                    <h2 id=\"{{ id or 'modal' }}-title\" class=\"modal-title\">{{ title }}</h2>\n                {% endif %}\n                {% if close_button != false %}\n                    <button type=\"button\" class=\"modal-close\" onclick=\"closeModal('{{ id or 'modal' }}')\" aria-label=\"Close modal\">\n                        <i class=\"fas fa-times\"></i>\n                    </button>\n                {% endif %}\n            </div>\n        {% endif %}\n        \n        <div class=\"modal-body\">\n            {% if body_content %}\n                {{ body_content | safe }}\n            {% endif %}\n            {{ caller() if caller else '' }}\n        </div>\n        \n        {% if footer_content or actions %}\n            <div class=\"modal-footer\">\n                {% if actions %}\n                    {% for action in actions %}\n                        {% set text = action.text %}\n                        {% set variant = action.variant %}\n                        {% set onclick = action.onclick %}\n                        {% set type = action.type %}\n                        {% include 'components/button.html' with context %}\n                    {% endfor %}\n                {% endif %}\n                {% if footer_content %}\n                    {{ footer_content | safe }}\n                {% endif %}\n            </div>\n        {% endif %}\n    </div>\n</div>\n\n<script>\nfunction openModal(modalId) {\n    const modal = document.getElementById(modalId);\n    if (modal) {\n        modal.classList.add('is-open');\n        modal.setAttribute('aria-hidden', 'false');\n        document.body.style.overflow = 'hidden';\n        \n        // Focus management\n        const firstFocusable = modal.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])');\n        if (firstFocusable) {\n            firstFocusable.focus();\n        }\n    }\n}\n\nfunction closeModal(modalId) {\n    const modal = document.getElementById(modalId);\n    if (modal) {\n        modal.classList.remove('is-open');\n        modal.setAttribute('aria-hidden', 'true');\n        document.body.style.overflow = '';\n    }\n}\n\n// Close modal on Escape key\ndocument.addEventListener('keydown', function(e) {\n    if (e.key === 'Escape') {\n        const openModal = document.querySelector('.modal-backdrop.is-open');\n        if (openModal) {\n            closeModal(openModal.id);\n        }\n    }\n});\n</script>"